<div xmlns="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../input-cache/schemas/R4/fhir-single.xsd">  <p>    This implementation guide defines a number of data sharing capabilities.  Some behaviors are tightly defined and will work    the same way in all evvironments (if all systems conform to this IG).  However, in many cases, a degree of variation is allowed.    This variation is necessary because of the breadth of types of implementation environments.  For example:  </p>  <ul>    <li>The participants involved in the exchange may vary - Only <a href="CapabilityStatement-pa-care-manager.html">Care Manager</a>      and <a href="CapabilityStatement-pa-patient-engagement.html">Patient Engagement</a> system, only Care Manager and      <a href="CapabilityStatement-pa-service-provider.html">Service Provider</a>, or all three.</li>    <li>The level of sophistication of the participants may vary - from a personal trainer using their phone, to a multi-billion dollar      EHR international vendor.  This will influence what types of technical capabilities the systems will have - and how the systems      prefer to operate.</li>    <li>The level of infrastructure available may vary.  Some environments may have shared registries available or shared persistence      environments for patient and provider data, while others may rely on all data being stored in the same system.</li>  </ul>  <p>    This section walks through the design decisions already reflected in the IG, as well as those that remain to be selected by    implementers, along with some guidance on how to make those decisions.  </p>    <a name="design"> </a>  <h3>IG Design Decisions and Assumptions</h3>  <p>    This IG makes certain assumptions about the best way to meet the interoperability requirements of the physical activity space.  This    section summarizes those design decisions and the assumptions and rationale underlying them.  The intent is to help better understand    <i>why</i> this IG is designed as it is, as well as providing a foundation for feedback.  Readers who believe alternative interoperability    approaches should be used are invited to identify places where the assumptions or rationale leading to the current choices are faulty.  </p>  <p>    If you are only interested in design decisions that need to be made in the scope of your implementation in order to comply with this IG,    rather than what decisions were made in the crafting of this IG, feel free to skip down to the <a href="#implementation">Implementation    Design Decisions</a> section.  </p>    <a name="exchange"> </a>  <h4>Data Exchange Mechanisms</h4>  <p>    This IG is focused on data sharing and uses several mechanisms to foster information sharing.  In all cases, the specific mechanisms    selected have been chosen based on guidance found in the new <a href="http://build.fhir.org/exchanging.html">R5 Approaches to Exchanging     FHIR Data</a> section.  The table below lists all of the exchange mechanisms used by this guide, the circumstances in which they are used,    and the rationale for selecting the approach based on the context of this IG.  The rationale includes the nagivation of the decision tree    found in the <i>Approaches to Exchanging</i> page.  </p>  <table class="grid">    <tbody>      <tr>        <th>Exchange Mechanism</th>        <th>Usage</th>        <th>Rationale</th>      </tr>      <tr>        <td>          <a href="https://build.fhir.org/exchanging-rest.html#create">REST Create</a>        </td>        <td>Used by:          <ul>            <li>              <a href="CapabilityStatement-pa-care-manager.html">Care Managers</a> when making               <a href="StructureDefinition-pa-task-for-referral-management.html">Tasks for Referral Management</a> available to               <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a> when the Task is stored on the              Service Provider system.            </li>            <li>              <a href="CapabilityStatement-pa-patient-engagement.html">Patient Engagement systems</a> and possibly              <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a> (if the <i>Service Provider</i> does not              have its own FHIR RESTful store) when storing any of the <a href="StructureDefinition-pa-base.html">Physical Activity               Observations</a>.  For <i>Service Providers</i> it may also be used when storing              <a href="StructureDefinition-pa-diagnosticreport.html">Intervention Reports</a> and possibly also new              <a href="StructureDefinition-pa-goal.html">Goals</a> or even <a href="StructureDefinition-pa-careplan.html">Care Plans</a>            </li>          </ul>        </td>        <td>RESTful create is appropriate because:          <ul>            <li>The process is <a href="https://build.fhir.org/exchanging.html#pull">initiated by the data source</a>.</li>            <li>This aspect of the process varies.  If the record is stored on the data source, then either               <a href="#subscription">subscription</a> or <a href="#polling">polling</a> would apply and retrieval would be              guided by the data consumer.  However, where the data is to be stored on the data consumer, then the data              consumer is not involved in <a href="https://build.fhir.org/exchanging.html#configured">configuring when or               how updates are received</a>.</li>            <li>There is expected to be a <a href="https://build.fhir.org/exchanging.html#connect-push">direct connection</a> between               the data source and consumer.  (This IG does not presently support the use of intermediaries.)</li>            <li>The data source directs <a href="https://build.fhir.org/exchanging.html#source-persist">which record is to be updated              and how</a>.</li>            <li>Each Task is <a href="https://build.fhir.org/exchanging.html#group-store">stored as an independent entity</a>, not as              a group.</li>            <li>There is no expectation of <a href="https://build.fhir.org/exchanging.html#group-transmit">multiple record changes</a>               being initiated at once.</li>            <li>This is a <a href="https://build.fhir.org/exchanging.html#rest">new record</a>.</li>          </ul>        </td>      </tr>      <tr>        <td>          <a href="https://build.fhir.org/exchanging-rest.html#update">REST Update</a>        </td>        <td>Used by:          <ul>            <li>Either <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a> or               <a href="CapabilityStatement-pa-care-manager.html">Care Managers</a> to update               <a href="StructureDefinition-pa-task-for-referral-management.html">Tasks for Referral Management</a>.  <i>Care Managers</i>              to cancel the Task if necessary when stored on the <i>Service Provider</i>, and <i>Service Providers</i> to update the status               and/or add <code>Task.outputs</code> when the Task is stored on the <i>Care Manager</i>.            </li>            <li>              <a href="CapabilityStatement-pa-patient-engagement.html">Patient Engagement systems</a> to set status and/or add              <code>Task.outputs</code> to <a href="{{site.data.fhir.ver.sdoh}}/StructureDefinition-SDOHCC-TaskForPatient.html">Tasks for               Patients</a>.            </li>            <li>              <a href="CapabilityStatement-pa-patient-engagement.html">Patient Engagement systems</a> and possibly              <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a> or               <a href="CapabilityStatement-pa-care-manager.html">Care Managers</a> to update               <a href="StructureDefinition-pa-goal.html">Goals</a> and <a href="StructureDefinition-pa-careplan.html">Care Plans</a> that              are not stored locally.            </li>          </ul>        </td>        <td>RESTful update is appropriate because:          <ul>            <li>The process is <a href="https://build.fhir.org/exchanging.html#pull">initiated by the data source</a>.</li>            <li>The data consumer is not involved in <a href="https://build.fhir.org/exchanging.html#configured">configuring when or               how updates are received</a>.</li>            <li>There is expected to be a <a href="https://build.fhir.org/exchanging.html#connect-push">direct connection</a> between               the data source and consumer.  (This IG does not presently support the use of intermediaries.)</li>            <li>The data source directs <a href="https://build.fhir.org/exchanging.html#source-persist">which record is to be updated              and how</a>.</li>            <li>Each Task is <a href="https://build.fhir.org/exchanging.html#group-store">stored as an independent entity</a>, not as              a group.</li>            <li>There is no expectation of <a href="https://build.fhir.org/exchanging.html#group-transmit">multiple record changes</a>               being initiated at once.</li>            <li>We are updating an <a href="https://build.fhir.org/exchanging.html#rest">existing record</a>.</li>            <li>While the changes <i>could</i> be handled as a patch, this feature is not widely supported and the instances being              changed are relatively small, meaning that the <a href="https://build.fhir.org/exchanging.html#resources">whole record</a>              will be changed.</li>          </ul>        </td>      </tr>      <tr>        <td>          <a name="subscription"> </a>          <a href="https://build.fhir.org/exchanging-subscription.html#pull">Subscription with Query</a>        </td>        <td>Used by:          <ul>            <li>              <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a> to be notified that a new              <a href="StructureDefinition-pa-task-for-referral-management.html">Tasks for Referral Management</a> exists when the              Task is stored on the <a href="CapabilityStatement-pa-care-manager.html">Care Manager system</a>, or for              <i>Care Managers</i> to be notified that the Task has been updated when it is stored on the <i>Service Provider</i>              system.            </li>            <li>              <a href="CapabilityStatement-pa-patient-engagement.html">Patient Engagement systems</a> to be notified that a new              <a href="{{site.data.fhir.ver.sdoh}}/StructureDefinition-SDOHCC-TaskForPatient.html">Task for Patients</a> exists.            </li>          </ul>        </td>        <td>Subscription is one of two alternative approaches to monitoring for new tasks and updated tasks on another system.  See          further discussion below in the <a href="#sub-vs-poll">Subscriptions vs. polling</a> section.  Where supported, subscription          is appropriate because:          <ul>            <li>The process is <a href="https://build.fhir.org/exchanging.html#pull">initiated by the data source</a>, in that it              triggers the record change that causes information to need to flow.</li>            <li>The data consumer <b>is</b> involved in <a href="https://build.fhir.org/exchanging.html#configured">configuring when or               how updates are received</a> because the data is not stored on their system and they might not always be available for              it to be pushed to them.</li>            <li>The key determiner of whether this approach is used instead of polling is              <a href="https://build.fhir.org/exchanging.html#subscription">whether subscription is supported</a>.  If so, then this              approach should be used.</li>            <li>To leverage simpler (and less secure) subcription mechanisms such as email notifications,               <a href="https://build.fhir.org/exchanging.html#subscription-push">the data itself will not be pushed</a> as part of              the subscription notification.  Note that this means that <a href="#search">search</a> is always also used.</li>          </ul>          <p>            See further discussion below in the <a href="#sub-vs-poll">Subscriptions vs. polling</a>          </p>        </td>      </tr>      <tr>        <td>          <a name="search"> </a>          <a href="https://build.fhir.org/exchanging-search.html#sync">Synchronous RESTful Search</a>        </td>        <td>Used by:          <ul>            <li>              <a href="CapabilityStatement-pa-patient-engagement.html">Patient Engagement systems</a> whenever retrieving information              from <a href="CapabilityStatement-pa-care-manager.html">Care Managers</a> or              <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a>            </li>            <li>              <a href="CapabilityStatement-pa-care-manager.html">Care Managers</a> or              <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a> when retrieving information from each other.            </li>          </ul>        </td>        <td>RESTful synchronous search is appropriate because:          <ul>            <li>The process is <a href="https://build.fhir.org/exchanging.html#pull">initiated by the data consumer</a>, as it decides              what information it is interested in retrieving and when.</li>            <li>There is expected to be a <a href="https://build.fhir.org/exchanging.html#connect-pull">direct connection</a> between               the data source and consumer.  (This IG does not presently support the use of intermediaries.)</li>            <li>There is not expected to be <a href="https://build.fhir.org/exchanging.html#human">human intervention</a> involved in              the data retrieval process.</li>            <li><a href="https://build.fhir.org/exchanging.html#hooks">CDS hooks cards</a> would not be an appropriate retrieval               mechanism.</li>            <li>The data will <a href="https://build.fhir.org/exchanging.html#pre-exists">already exist</a> at the time it is               retrieved.</li>            <li>The focus of the change is retrieving <a href="https://build.fhir.org/exchanging.html#resources">resources</a>.</li>            <li>At the time of retrieval, there might be <a href="https://build.fhir.org/exchanging.html#onlyone">multiple resources               to retrieve</a> - and the resource ids of the desired records will not always be known.</li>            <li>The exchange is not about retrieving the <a href="https://build.fhir.org/exchanging.html#history">history</a> of any              particular resource.</li>            <li>The desired data should be returnable with an <a href="https://build.fhir.org/exchanging.html#adhoc">ad-hoc               query</a>.</li>            <li>The data can reasonably be retrieved using <a href="https://build.fhir.org/exchanging.html#rest-search">RESTful               search</a>.</li>            <li>The data should be retrievable in real time, so there is no need for              <a href="https://build.fhir.org/exchanging.html#synchronous">asynchronous</a>.</li>          </ul>        </td>      </tr>      <tr>        <td>          <a href="https://build.fhir.org/exchanging-rest.html#read">REST Read</a>        </td>        <td>Used by:          <ul>            <li>Any of the systems when accessing a Task or other resource and there is a referenced resource that cannot be              retrieved with a simple <a href="{{site.data.fhir.path}}search.html#_include">_include</a>.</li>            <li>Any of the systems when checking to see whether a record held by a different system that has previously been retrieved               has been updated since last retrieved (e.g. before beginning an update).</li>          </ul>        </td>        <td>RESTful read is appropriate because:          <ul>            <li>The process is <a href="https://build.fhir.org/exchanging.html#pull">initiated by the data consumer</a>, as it decides              what information it is interested in retrieving and when.</li>            <li>There is expected to be a <a href="https://build.fhir.org/exchanging.html#connect-pull">direct connection</a> between               the data source and consumer.  (This IG does not presently support the use of intermediaries.)</li>            <li>There is not expected to be <a href="https://build.fhir.org/exchanging.html#human">human intervention</a> involved in              the data retrieval process.</li>            <li><a href="https://build.fhir.org/exchanging.html#hooks">CDS hooks cards</a> would not be an appropriate retrieval               mechanism.</li>            <li>The data will <a href="https://build.fhir.org/exchanging.html#pre-exists">already exist</a> at the time it is               retrieved.</li>            <li>The focus of the change is retrieving <a href="https://build.fhir.org/exchanging.html#resources">resources</a>.</li>            <li>Only a <a href="https://build.fhir.org/exchanging.html#onlyone">single resource</a> is being retrieved.</li>            <li>The <a href="https://build.fhir.org/exchanging.html#current">current version</a> of the resource is what is needed.</li>          </ul>        </td>      </tr>    </tbody>  </table>  <a name="value"> </a>  <h3>Electronic Sharing with Patients</h3>  <p>    Like the <a href="{{site.data.fhir.ver.sdoh}}">Gravity SDOH IG</a>, this IG requires support for electronic data sharing     with patient systems.  Not all patients will have such systems - or even devices capable of accessing or running such     systems.  Even with access to the systems, not all patients will choose to make use of them.  Care can still be provided    in such cases, and the IG ability to share information between     <a href="CapabilityStatement-pa-care-manager.html">Care Managers</a> and     <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a> will still be beneficial.  As well, patient    circumstances may change over time, meaning that data that might not have been accessed originally might be accessed    at some point in the future when capability and/or interest change.  </p>  <p>    The requirement to share data with patients has two justifications:  </p>  <ul>    <li>Current U.S. regulations mandate the provision of electronic data to patients in interoperable formats</li>    <li>Applications with an awareness of goals, referrals, plans, and other data can better support patients as they make the      lifestyle changes that will result in increased physical activity.</li>  </ul>  <p>    In addition to patients having access to read data stored on other systems, there is also value in them being able to    share information with other systems and even update data residing in those other systems.  See further discussion    on this in the <a href="#permissions">Persmissions</a> section below.  </p>  <a name="patient-data"> </a>  <h4>Patient Data Management</h4>  <p>    This IG allows for direct data capture by patients (or their caregivers) both manually and using their devices.  Quite often, this data    may, at least initially, be stored on patient devices such as phones or tablets.  In some cases it might also find its way into personal    health record (PHR) type systems.  One of the IG design questions was whether to have patient systems expose their own endpoint to allow    local data to be <a href="https://build.fhir.org/exchanging.html#pull">pulled</a> by <a href="CapabilityStatement-pa-care-manager.html">Care     Manager</a> or <a href="CapabilityStatement-pa-service-provider.html">Service Provider</a> systems.  </p>  <p>    For now, this IG presumes that patient-facing systems will <b>not</b> expose their own FHIR server endpoint.  All data transfer will be    <a href="https://build.fhir.org/exchanging.html#pull">pushed</a> from the <a href="CapabilityStatement-pa-patient-engagement.html">Patient     Engagement</a> system to whatever other systems require it.  This decision was made because:  </p>  <ul>    <li>Most patient storage devices do not support exposing FHIR server endpoints</li>    <li>The market for personal health records that could offer such functionality is immature and not widely used by the patient community</li>    <li>There are standard mechanisms for patients to discover the endpoints of their care providers and gain secure access to those servers      through apps.  There are no similar standard mechanisms for EHRs to discover and securely access patient-centric endpoints.</li>  </ul>  <blockquote class="stu-note">    <p>      PHRs and other patient-facing applications that have their own storage capabilities are welcome to share how they have overcome barriers      around endpoint discovery and authorization and/or present evidence of more widespread use.  In the future, this IG may be extended to       support architectures where systems can 'pull' data from patient-facing systems rather than always having it pushed.    </p>  </blockquote>  <a name="relatedperson"> </a>  <h4>Patient Caregivers</h4>  <p>    While giving patients the ability to access, and possibly manipulate, data in other systems is valuable, the reality is that not    all patients will be able to do this on their own behalf.  Minors as well as those with cognitive or other limitations may    be unable to use <a href="CapabilityStatement-pa-patient-engagement.html">Patient Engagement systems</a> on their own.    In such situations, patients may rely on family members, neighbors, or others to interact with the systems on their behalf.    In FHIR, such individuals are represented using the <a href="{{site.data.fhir.path}}">RelatedPerson</a> resource.  Support    for this resource is strongly encouraged but is not mandated as the clientel of some providers may not justify the additional    application complexity of supporting users who are acting "on behalf of" someone else, including the consent, access permissions    and other considerations that go along with supporting access by anyone other than the patient themselves.  (In such cases,    it is possible that patients will resort to account sharing, though this may force them to expose more data than they might    otherwise wish to.)  </p>  <a name="storage"> </a>  <h4>Data Storage Location</h4>  <p>    One of the key questions that drives much of the architecture is around where data will be stored.  Specifically, where are Tasks,    CarePlans and Goals, and even Observation data stored?  Do copies of the records exist in each system, or are they maintained in only    one?  If only one, is it the system that originally created them or perhaps a different system?  Considerations in making these    decisions include the following:  </p>  <ul>    <li>Is there a need for a consistent view of the data - where each system involved has the same understanding?</li>    <li>Does one system have sole authority to make changes to the record, or at least to control who changes the record?</li>    <li>Will changes to the record typically originate more on one system than another?</li>    <li>Does one system have a need for the most up-to-date information about a record more than others?</li>  </ul>  <p>    In this IG, for all of the resources shared, the preference, and sometimes the requirement, is that there be a single authoritative    copy of the information.  For <a href="StructureDefinition-pa-servicerequest.html">referrals</a> and the     <a href="StructureDefinition-pa-task-for-referral-management.html">tasks that manage their execution</a>, this is a firm requirement    for legal and payment reasons.  For <a href="StructureDefinition-pa-goal.html">goals</a>,     <a href="StructureDefinition-pa-careplan.html">care plans</a> and <a href="StructureDefinition-pa-condition.html">conditions</a>, it     is a strong expectation to ensure avoid patient confusion and ensure all participants are working in alignment.  For     <a href="StructureDefinition-pa-observation-base.html">observations</a>, having duplication is less problematic.  </p>  <p>    The storage decisions that are 'locked down' by this IG are as follows:  </p>  <ul>    <li>The <a href="StructureDefinition-pa-servicerequest.html">Service Requests</a> that represent a referral authorization will always be      stored on the <a href="CapabilityStatement-pa-care-manager.html">Care Manager</a> system of the practitioner that created the referral.      Only the organization that created the referral is able to change it.  Status changes, including marking the referral as 'complete' are      determined by the ordering system - even if the performing system thinks a referral is complete, the requester might disagree.</li>      <li><a href="StructureDefinition-pa-condition.html">Conditions</a> will also always be stored on the <i>Care Manager</i> system, as only      clinical systems are typically authorized to create official 'diagnoses'.  These records can also not be updated by other systems.</li>    <li>Based on the <a href="#patient-data">patient data</a> decisions above, information such as observation values might be stored on      <a href="CapabilityStatement-pa-patient-engagement.html">Patient Engagement systems</a>, but this data will not be accessible by other      systems.  This means that <a href="StructureDefinition-pa-base.html">physical activity observations</a> captured by patients will need to       be cloned when being shared with <i>Care Managers</i> or <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a>.</li>  </ul>  <p>    Discussion of storage locations that may vary by implementation environment are discussed <a href="#impstorage">below</a>.  </p>  <a name="intermediaries"> </a>  <h3>Handling Intermediaries</h3>  <p>    In the <a href="{{site.data.fhir.ver.sdoh}}">Gravity SDOH IG</a>, support is provided for intermediary systems to operate between the    ordering systems and the service delivery systems.  These are labeled     <a href="{{site.data.fhir.ver.sdoh}}/CapabilityStatement-SDOHCC-CoordinationPlatform.html">coordination platforms</a>.  They take    general or broad referrals and break them down into smaller referrals divied out to service providers with the necessary expertise to    undertake specific tasks.  They might also handle the process of trying to find the most appropriate service provider to handle a    particular referral, having a deeper knowledge of the available service agencies than the ordering provider might.  </p>  <p>    For now, this IG has not introduced a similar concept.  The reasons for this are:  </p>  <ul>    <li>The complexity of the referrals envisioned in the physical activity space is significantly less than it is for social determinants      of health.</li>    <li>There are not (yet?) well developed agencies in the physical activity space who typically take on a coordination role.</li>    <li>For this initial release of the implementation guide, there is a strong desire to minimize complexity where possible.</li>  </ul>  <p>    If there is a need for intermediaries in a particular implementation environment, they will typically be able to accomplish their    objectives by implementing both the <a href="CapabilityStatement-pa-care-manager.html">Care Manager</a> and    <a href="CapabilityStatement-pa-service-provider.html">Service Provider</a> interfaces.  When interacting with a <i>Care Manager</i>, they    will behave as a <i>Service Provider</i> and vice versa.  </p>  <a name="messaging"> </a>  <h4>REST vs. Messaging</h4>  <p>    Some of the other HL7 IGs that have been defined that also provide support for referral submission and management.  These environments    have opted to use <a href="https://build.fhir.org/exchanging-messaging.html">messaging</a> rather than RESTful exchange.  The use of    messaging makes sense in environments where there is no mechanism to support securely searching for additional data when needed.  In    that situation, there is no choice but to define in advance exactly what data might need to be shared and to package it all up and    transmit it at once.  However, in the physical activity case, the primary data holder will be EHRs and, due to U.S. regulations, almost    all such systems provide a FHIR interface to allow searching for data.  REST is generally a preferred interoperability mechanism over    messaging because it is lighter-weight and requires less customization.  It also allows participants to more easily adapt their    exchanges as requirements evolve.  Therefore, this IG therefore follows the     <a href="{{site.data.fhir.ver.sdoh}}">Gravity SDOH</a> IG approach of leveraging REST for referral management.  </p>  <a name="sub-vs-poll"> </a>  <h4>Subscription vs. Polling</h4>  <p>    As described in the <a href="{{site.data.fhir.ver.sdoh}}/checking_task_status.html">Gravity SDOH IG</a>, there are two common    mechanisms for allowing a remote system to monitor for new and changed resources on another system - polling and subscriptions.    This IG has opted to standardize on only the subscription mechanism.  The email and SMS-polling mechanisms do not require any    software capabilities on the part of the <a href="CapabilityStatement-pa-service-provider.html">Service Provider</a> and are relatively    simple to be implemented by <a href="CapabilityStatement-pa-care-manager.html">Care Managers</a>.  In more sophisticated environments,    the Web-hook mechanism can be used.  </p>  <p>    The polling mechanism can place significant load on <i>Care Managers</i> and this outweighs the slight savings involved in avoiding    the need to develop subscription capabilities.  </p>  <p>    To keep the subscription process as simple as possible, this IG does not mandate support for electronic creation or maintenance of     subscriptions.  While this <i>can</i> be done, systems are also free to handle set-up of subscriptions manually as part of the registration    process.  </p>  <a name="transactions"> </a>  <h4>Transactions and Batch</h4>  <p>    The FHIR specification allows client systems to submit multiple <a href="{{site.data.fhir.path}}http.html#create">creates</a> or    <a href="{{site.data.fhir.path}}http.html#update">updates</a> using the     <a href="{{site.data.fhir.path}}http.html#transaction">batch or transaction</a> mechanism.  There may be situations where it is    attractive to submit multiple observations, or even a care plan and associated goals with a single call, and implementers are free    to take advantage of these mechanisms where both sides provide support.  However, in the interest of simplicity, this IG does not    currently set any conformance expectations around the use of these capabilities.  </p>  <p>    Note that, for most systems, it will be possible to make multiple calls to the same FHIR server in parallel, which may reduce some of the    drivers for the batch/transaction interactions.  </p>    <a name="implementation"> </a>  <h3>Implementation Design Decisions</h3>  <p>    This section of the IG covers the various architectural considerations that are not nailed down as part of the IG design and    where variability across implementations is expected (or at least allowed for).  Implementations will need to make choices amongst    these options based on implementation environment, or in some cases, may need to support multiple mechanisms.  </p>  <blockquote class="stu-note">    <p>      As the community becomes more mature and we learn more about what implementers can and cannot reasonably be expected to do,      it is likely that at least some of the optionality currently supported here will be reduced.  Feedback is welcome on areas where      optionality is felt to be unnecessary or problematic.    </p>  </blockquote>    <a name="impstorage"> </a>  <h4>Implementation Storage Decisions</h4>  <p>    As noted in the section on storage <a href="#">above</a>, there are a few situations where the location where certain resources are    stored and maintained may vary based on environment.  This section discusses those situations:  </p>    <a name="storage-referral"> </a>  <h5>Storing Referral Tasks</h5>  <p>    There are two options for where <a href="StructureDefinition-pa-task-for-referral-management.html">tasks seeking referral fulfillment</a>:  </p>  <ol>    <li>Create the Task on the <a href="CapabilityStatement-pa-service-provider.html">Service Provider</a> system</li>    <li>Create the Task on the <a href="CapabilityStatement-pa-care-manager.html">Care Manager</a></li>  </ol>  <p>    The first option is preferred because the Task will primarily be maniuplated by the <i>Service Provider</i> and they have the most urgent    need to understand the 'current' state of fulfillment process.  However, not all <i>Service Providers</i> will have a FHIR server endpoint    that can host the relevant Tasks.  For this reason, there are two distinct <a href="{{site.data.fhir.path}}capabilitystatement.html">Capability    Statements</a> defined - one for <a href="CapabilityStatement-pa-service-provider-full.html">'full' service providers</a> which have FHIR     server capability and would be responsible for storing the Task, and one for     <a href="CapabilityStatement-pa-service-provider-light.html">'light' service providers</a> which would be notified of relevant tasks     created on the <i>Care Manager</i> and then would use <a href="{{site.data.fhir.path}}search.html">search</a> to retrieve and     <a href="{{site.data.fhir.path}}http.html#update">update</a> to change status and add outputs as necessary.  </p>  <a name="storage-goals"> </a>  <h5>Storing Goals and Plans</h5>  <p>    Goals and plans might be managed by either <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a> or     <a href="CapabilityStatement-pa-care-manager.html">Care Managers</a>, but regardless of where they are managed could be updated by any of    the systems.  The choice of which system should store should be driven by who initiates the goals and plans and also who will be taking    the lead in maintaining those records.  Depending on the circumstance, it could be either.  Obviously, a <i>Service Provider</i> can only    take responsibility for the records if it has a FHIR endpoint, so this is limited to    <a href="CapabilityStatement-pa-service-provider-full.html">'full' service providers</a>.  </p>  <a name="storage-obs"> </a>  <h5>Storing Observations</h5>  <p>    Unlike referrals, plans, and goals, observations are rarely changed once created, so there are considerably fewer negative consequences    to the same records existing on multiple systems.  As well, as discussed in the general section on <a href="#storage">storage</a> above,    the primary sources of observational data - <a href="CapabilityStatement-pa-patient-engagement.html">Patient Engagement systems</a> -    are not expected to have FHIR endpoints.  They might well capture data locally, but if it is going to be shared, it will need to be pushed    to the <a href="CapabilityStatement-pa-service-provider.html">Service Provider</a> and/or     <a href="CapabilityStatement-pa-care-manager.html">Care Manager</a> systems.  Which one(s) the data is pushed to and which observation types    get pushed depends on what information the systems want to see.  Some might not want to receive data at all and will rely on verbal    conversation with the patient to evaluate progress.  Others might be only interested in the     <a href="StructureDefinition-observation-evs.html">base measures</a> but not want all of the supporting measures.  Some systems will be    interested in everything.  Because of this variablility, <i>patient engagement</i> systems should be configurable to allow a patient    to identify which system(s) should receive which information (provided, of course, that the patient is comfortable with sharing any    of it).  </p>  <a name="permissions"> </a>  <h4>Permissions for Changing and Creation</h4>  <p>    Historically, <a href="StructureDefinition-pa-goal.html">goal</a> and <a href="StructureDefinition-pa-careplan.html">care plan</a> information    have resided on the system of whomever created them and were revised solely by the users of that system.  However, interoperable interfaces    now mean that it is possible for other systems (and therefore other users) to be involved in the maintenance of these resources.  For example,    a plan created by a physician might be updated by the patient, one of their care-givers, and/or by an exercise professional.  The same "multi-user    participation" approach could occur with artifacts created in a <i>service provider</i> system.  However, supporting multiple authors adds    some complexity and requires some implementation decisions:  </p>  <ul>    <li>What external systems (and users) can make changes?  Are patients and their caregivers allowed to make changes?  Can clinicians make      changes to records held by exercise professionals, or vice versa?</li>    <li>What operations are permitted?  Can external systems create care plans and/or goals, or only update them?  (Typically records are not      deleted - statuses are changed instead.  Certainly, deletion by external systems would be uncommon.)</li>    <li>What data elements can be changed?  Can the nature of the goal or plan itself be changed, or are changes limited to adding comments      and/or updating status?</li>    <li>Are the rules different based on who created the record?  For example, would a patient or service provider have full edit privileges for      plans or goals they created themselves on a <a href="CapabilityStatement-pa-care-manager.html">Care Manager</a>, but more restrictions on records       that were created by a practitioner within the <i>Care Manager</i> organization.</li>  </ul>  <p>    These decisions will by driven by organizational policy as well as provider comfort levels.  However, suggested elements to support updating    include at least the following: <code>CarePlan.status</code>, <code>CarePlan.period</code>, <code>CarePlan.note</code>,     <code>Goal.lifecycleStatus</code>, <code>Goal.achievementStatus</code>, <code>Goal.note</code>.  </p>  <a name="task"> </a>  <h4>Task as a Means of Communication</h4>  <p>    <a href="StructureDefinition-pa-task-for-referral-management.html">Tasks for referral management</a> are the mechanism that     <a href="CapabilityStatement-pa-care-manager.html">Care Managers</a> use to communicate with    <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a>.  At a minimum, there is a need to communicate    the following:  </p>  <ul>    <li>A practitioner is asking an exercise professional/organization to fulfill a referral.  (<code>Task.status</code>='requested')</li>    <li>The exercise professional/organization has accepted or rejected that request for fulfillment.  (<code>Task.status</code>='accepted'/'rejected')</li>    <li>The exercise professional/organization considers their work to be completed.  (<code>Task.status</code>='completed')</li>  </ul>  <p>    However, there is additional information that can be shared.  <code>Task.status</code> can be used to communicate additional information as shown in the     <a href="StructureDefinition-pa-task-for-referral-management.html#status">notes section</a> of the profile.  As well, <code>Task.statusReason</code>,    <code>Task.businessStatus</code>, and <code>Task.note</code> can be used to convey additional information.  <code>Task.statusReason</code>    is set by whichever system sets the status (<i>Care Manager</i> for 'cancelled' and <i>Service Provider</i> for 'rejected', 'on-hold', or 'failed').      <code>Task.businessStatus</code> is set exclusively by the <i>Service Provider</i>.  <code>Task.note</code> might be populated by either system.    Finally, there is the <a href="StructureDefinition-pa-diagnosticreport.html">intervention report</a> linked to by <code>Task.output</code> which is    created by the <i>Service Provider</i>.  Typically this is done at the completion of the referral, but in some cases the draft version of the report    might be shared early, or even multiple reports created over time.  </p>  <p>    The design decision here is around how much communication is necessary or appropriate.  Some <i>Care Managers</i> may have little interest beyond    acceptance and completion, while others may find value in progress updates for each visit.  <i>Service Providers</i> may not have a workflow design,    bandwidth, and/or funding to provide any information beyond the minimum, or they might be well-positioned to document and share progress on a    regular basis.  This IG does not set specific expectations for how much informaiton should be communicated or in what circumstances.  For now,    such decisions are up to the participants in the exchange and may be negotiated accordingly.  </p>  <a name="registries"> </a>  <h4>Registries</h4>  <p>    Communication between <a href="CapabilityStatement-pa-care-manager.html">Care Managers</a> and     <a href="CapabilityStatement-pa-patient-engagement.html">Patient Engagement</a> systems is somewhat straight-forward because, based on US regulation,    EHRs already need to have a mechanism of registering and authenticating patients and enabling them to communicate with their systems, typically using    OAuth as defined by <a href="{{site.data.fhir.ver.smart}}">SMART on FHIR</a> patient-mediated authentication.  However, establishing a connection     between <i>care managers</i> and <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a> is somewhat more challenging as there    will often not be a direct personal relationship btween <i>care manager</i> and <i>service provider</i>.  </p>  <p>    Establishing interoperability will mean exchanging endpoint locations, establishing trust (having each system's authorization engine grant appropriate    privileges to relevant users of the other system), and putting in place necessary legal frameworks, such as affiliate agreements to allow sharing    of data and ensuring that data shared is subject to appropriate protections.    </p>  <p>    In order for insurance to cover referred services, some form of credentialling and registration of individual users will also likely be needed.  What     expectations payers will have is not yet firmly established.  However, it is likely that registration with professional bodies such as     <a href="https://usreps.org/">The US Registry of Exercise Professionals</a>.  As well, the individual Practitioners and/or Organizations will need    to register for a <a href="https://www.cms.gov/Regulations-and-Guidance/Administrative-Simplification/NationalProvIdentStand">National Provider     Identifier</a> with CMS.  While practitioners can leverage this IG without having an NPI, they will typically not be able to submit insurance    claims based on HIPAA regulations.  The Physical Activity Alliance will work with CMS to reduce barriers to applying for NPIs for exercise    professionals that are not directly affiliated with healthcare organizations.  </p>  <p>    In the short term, relationships between <i>Care Managers</i> and <i>Service Providers</i> will likely need to be manually negotiated and established.      Implementers will need to work to create business and legal arrangements with other interested parties who have undertaken the work to comply with    this standard and are ableto create or receive referrals.  In the intermediate term, organizations may be able to take advantage of the anticipated    national provider registry leveraging the <a href="http://build.fhir.org/ig/HL7/fhir-directory-query">FAST Directory Query IG</a> standard to    discover eligible Practitioners and Organizations and leverage the shared legal framework to establish connection automatically without a need for    point-to-point negotiation.  </p>    <a name="identity"> </a>  <h4>Resolving Identity</h4>  <p>    Unlike CareTeams, Practitioners, PractitionerRoles, Organizations and HealthcareServices as discussed above, there typically will not be a shared     registry of <a href="{{site.data.fhir.path}}patient.html">Patients</a> or <a href="{{site.data.fhir.path}}relatedperson.html">Related Persons</a>     available to reference.  There is also not (yet?) a single shared patient identifier that can be used to reliabily convey the identity of these     individuals.  However, there will be a need for <a href="CapabilityStatement-pa-care-manager.html">Care Managers</a>,     <a href="CapabilityStatement-pa-service-provider.html">Service Providers</a> and <a href="CapabilityStatement-pa-patient-engagement.html">Patient     Engagement</a> systems to recognize patient and related person records referenced in other systems with the equivalent records in their own system    to ensure that duplicate records are not accidentally created.  </p>  <p>    Given the absence of a reliable cross-system identifier, matching will need to be performed on the basis of demographics.  This IG does not set    expectations for how matching is performed beyond setting standards for what demographic information must be shared.  There a wide variety of    approaches that account for variations in spelling, transposition of portions of birth date, changes in identifying information such as gender,    etc.  Each implementation will need to determine a set of criteria that sufficiently reduces both the risk of an incorrect match, as well as the    failure to match appropriately - and thus risk the creation of a duplicate record.  </p></div>