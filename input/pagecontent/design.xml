<div xmlns="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../input-cache/schemas/R4/fhir-single.xsd">  <p>    This implementation guide defines several data sharing capabilities.  Some behaviors are tightly defined and will work    the same way in all environments (if all systems conform to this IG).  However, in many cases, a degree of variation is allowed.    This variation is necessary because of the breadth of types of implementation environments.  For example:  </p>  <ul>    <li>The participants involved in the exchange may vary - Only <a href="workflow.html#caremanager">Care Manager</a>      and <a href="workflow.html#patient">Patient Engagement</a> system, only Care Manager and      <a href="workflow.html#serviceprovider">Service Provider</a>, or all three.</li>    <li>The level of sophistication of the participants may vary - from a personal trainer using their phone, to a multi-billion-dollar      EHR international vendor.  This will influence what types of technical capabilities the systems will have - and how the systems      prefer to operate.</li>    <li>The level of infrastructure available may vary.  Some environments may have shared registries available or shared persistence      environments for patient and provider data, while others may rely on all data being stored in the same system.</li>  </ul>  <p>    This section walks through the design decisions already reflected in the IG, as well as those that remain to be selected by    implementers, along with some guidance on how to make those decisions.  </p>    <a name="design"> </a>  <h3>IG Design Decisions and Assumptions</h3>  <p>    This IG makes certain assumptions about the best way to meet the interoperability requirements of the physical activity area.  This    section summarizes those design decisions and the assumptions and rationale underlying them.  The intent is to help better understand    <i>why</i> this IG is designed as it is, as well as providing a foundation for feedback.  Readers who believe alternative interoperability    approaches should be used are invited to identify places where the assumptions or rationale leading to the current choices are faulty.  </p>  <p>    If you are only interested in design decisions that need to be made in the scope of your implementation in order to comply with this IG,    rather than what decisions were made in the crafting of this IG, feel free to skip down to the <a href="#implementation">Implementation    Design Decisions</a> section.  </p>    <a name="exchange"> </a>  <h4>Data Exchange Mechanisms</h4>  <p>    This IG focuses on data sharing and uses several mechanisms to foster information sharing.  In all cases, the specific mechanisms    selected have been chosen based on guidance found in the new <a href="http://build.fhir.org/exchanging.html">R5 Approaches to Exchanging     FHIR Data</a> section.  The table below lists all the exchange mechanisms used by this guide, the circumstances in which the IG uses them,    and the rationale for selecting the approach based on the context of this IG.  The rationale includes the navigation of the decision tree    found in the <i>Approaches to Exchanging</i> page.  </p>  <table class="grid">    <thead style="background-color:WhiteSmoke">      <tr>        <th>Exchange Mechanism</th>        <th>Usage</th>        <th>Rationale</th>      </tr>    </thead>    <tbody>      <tr>        <td>          <a href="https://build.fhir.org/exchanging-rest.html#create">REST Create</a>        </td>        <td>Used by:          <ul>            <li>              <a href="workflow.html#caremanager">Care Managers</a> when making               <a href="StructureDefinition-pa-task-for-referral-management.html">Tasks for Referral Management</a> available to               <a href="workflow.html#serviceprovider">Service Providers</a> when they store the Task on               Service Provider systems.            </li>            <li>              <a href="workflow.html#patient">Patient Engagement systems</a> and possibly              <a href="workflow.html#serviceprovider">Service Providers</a> (if the <i>Service Provider</i> does not              have its own FHIR RESTful store) when storing any of the <a href="StructureDefinition-pa-observation-base.html">Physical Activity               Observations</a>.  For <i>Service Providers</i> it may also be used when storing              <a href="StructureDefinition-pa-diagnosticreport.html">Intervention Reports</a> and possibly also new              <a href="StructureDefinition-pa-goal.html">Goals</a> or even <a href="StructureDefinition-pa-careplan.html">Care Plans</a>            </li>          </ul>        </td>        <td>RESTful create is appropriate because:          <ul>            <li>The process is <a href="https://build.fhir.org/exchanging.html#pull">initiated by the data source</a>.</li>            <li>This aspect of the process varies.  If the data source stores the record on their own system, then <a href="#subscription">subscription</a>              would apply and retrieval would be guided by the data consumer.  However, where the data is to be stored on the data consumer,               then the data consumer is not involved in <a href="https://build.fhir.org/exchanging.html#configured">configuring when or               how updates are received</a>.</li>            <li>There is expected to be a <a href="https://build.fhir.org/exchanging.html#connect-push">direct connection</a> between               the data source and consumer.  (This IG does not presently support the use of intermediaries.)</li>            <li>The data source directs <a href="https://build.fhir.org/exchanging.html#source-persist">which record is to be updated              and how</a>.</li>            <li>Each Task is <a href="https://build.fhir.org/exchanging.html#group-store">stored as an independent entity</a>, not as              a group.</li>            <li>There is no expectation of <a href="https://build.fhir.org/exchanging.html#group-transmit">multiple record changes</a>               being initiated at once.</li>            <li>This is a <a href="https://build.fhir.org/exchanging.html#rest">new record</a>.</li>          </ul>        </td>      </tr>      <tr>        <td>          <a href="https://build.fhir.org/exchanging-rest.html#update">REST Update</a>        </td>        <td>Used by:          <ul>            <li>Either <a href="workflow.html#serviceprovider">Service Providers</a> or               <a href="workflow.html#caremanager">Care Managers</a> to update               <a href="StructureDefinition-pa-task-for-referral-management.html">Tasks for Referral Management</a>.  <i>Care Managers</i>              to cancel the Task, if necessary, when stored on the <i>Service Provider</i>, and <i>Service Providers</i> to update the status               and/or add <code>Task.outputs</code> when they store the Task on <i>Care Managers</i>.            </li>            <li>              <a href="workflow.html#patient">Patient Engagement systems</a> to set status and/or add              <code>Task.outputs</code> to <a href="{{site.data.fhir.ver.sdoh}}/StructureDefinition-SDOHCC-TaskForPatient.html">Tasks for               Patients</a>.            </li>            <li>              <a href="workflow.html#patient">Patient Engagement systems</a> and possibly              <a href="workflow.html#serviceprovider">Service Providers</a> or               <a href="workflow.html#caremanager">Care Managers</a> to update               <a href="StructureDefinition-pa-goal.html">Goals</a> and <a href="StructureDefinition-pa-careplan.html">Care Plans</a> that              are not stored locally.            </li>          </ul>        </td>        <td>RESTful update is appropriate because:          <ul>            <li>The process is <a href="https://build.fhir.org/exchanging.html#pull">initiated by the data source</a>.</li>            <li>The data consumer is not involved in <a href="https://build.fhir.org/exchanging.html#configured">configuring when or               how updates are received</a>.</li>            <li>There is expected to be a <a href="https://build.fhir.org/exchanging.html#connect-push">direct connection</a> between               the data source and consumer.  (This IG does not presently support the use of intermediaries.)</li>            <li>The data source directs <a href="https://build.fhir.org/exchanging.html#source-persist">which record is to be updated              and how</a>.</li>            <li>Each Task is <a href="https://build.fhir.org/exchanging.html#group-store">stored as an independent entity</a>, not as              a group.</li>            <li>There is no expectation of <a href="https://build.fhir.org/exchanging.html#group-transmit">multiple record changes</a>               being initiated at once.</li>            <li>We are updating an <a href="https://build.fhir.org/exchanging.html#rest">existing record</a>.</li>            <li>While the changes <i>could</i> be handled as a patch, this feature is not widely supported and the instances being              changed are relatively small, meaning that the <a href="https://build.fhir.org/exchanging.html#resources">whole record</a>              will be changed.</li>          </ul>        </td>      </tr>      <tr>        <td>          <a name="subscription"> </a>          <a href="https://build.fhir.org/exchanging-subscription.html#pull">Subscription with Query</a>        </td>        <td>Used by:          <ul>            <li>              <a href="workflow.html#serviceprovider">Service Providers</a> to be notified that a new              <a href="StructureDefinition-pa-task-for-referral-management.html">Tasks for Referral Management</a> exists when the              <a href="workflow.html#caremanager">Care Manager system</a> stores the Task on their own system, or for              <i>Care Managers</i> to be notified that the Task has been updated when they have stored it on a <i>Service Provider</i>              system.            </li>            <li>              <a href="workflow.html#patient">Patient Engagement systems</a> to be notified that a new              <a href="{{site.data.fhir.ver.sdoh}}/StructureDefinition-SDOHCC-TaskForPatient.html">Task for Patients</a> exists.            </li>          </ul>        </td>        <td>Subscription is appropriate because:          <ul>            <li>The process is <a href="https://build.fhir.org/exchanging.html#pull">initiated by the data source</a>, in that it              triggers the record change that causes information to need to flow.</li>            <li>The data consumer <b>is</b> involved in <a href="https://build.fhir.org/exchanging.html#configured">configuring when or               how updates are received</a> because the data is not stored on their system and they might not always be available for              it to be pushed to them.</li>            <li>The key determiner of whether this approach is used instead of polling is              <a href="https://build.fhir.org/exchanging.html#subscription">whether subscription is supported</a>.  This IG has made the              determination that mandating support for at least limited subscriptions is reasonable and the complexity of doing so is              more than compensated by the reduced bandwidth expectations as compared to polling.</li>            <li>To leverage simpler (and less secure) subscription mechanisms such as email notifications,               <a href="https://build.fhir.org/exchanging.html#subscription-push">the data itself will not be pushed</a> as part of              the subscription notification.  Note that this means that <a href="#search">search</a> is always also used.</li>          </ul>          <p>            See further discussion below in the <a href="#sub-vs-poll">Subscriptions vs. polling</a>          </p>        </td>      </tr>      <tr>        <td>          <a name="search"> </a>          <a href="https://build.fhir.org/exchanging-search.html#sync">Synchronous RESTful Search</a>        </td>        <td>Used by:          <ul>            <li>              <a href="workflow.html#patient">Patient Engagement systems</a> whenever retrieving information              from <a href="workflow.html#caremanager">Care Managers</a> or              <a href="workflow.html#serviceprovider">Service Providers</a>            </li>            <li>              <a href="workflow.html#caremanager">Care Managers</a> or              <a href="workflow.html#serviceprovider">Service Providers</a> when retrieving information from each other.            </li>          </ul>        </td>        <td>RESTful synchronous search is appropriate because:          <ul>            <li>The process is <a href="https://build.fhir.org/exchanging.html#pull">initiated by the data consumer</a>, as it decides              what information it is interested in retrieving and when.</li>            <li>There is expected to be a <a href="https://build.fhir.org/exchanging.html#connect-pull">direct connection</a> between               the data source and consumer.  (This IG does not presently support the use of intermediaries.)</li>            <li>There is not expected to be <a href="https://build.fhir.org/exchanging.html#human">human intervention</a> involved in              the data retrieval process.</li>            <li><a href="https://build.fhir.org/exchanging.html#hooks">CDS hooks cards</a> would not be an appropriate retrieval               mechanism.</li>            <li>The data will <a href="https://build.fhir.org/exchanging.html#pre-exists">already exist</a> at the time it is               retrieved.</li>            <li>The focus of the change is retrieving <a href="https://build.fhir.org/exchanging.html#resources">resources</a>.</li>            <li>At the time of retrieval, there might be <a href="https://build.fhir.org/exchanging.html#onlyone">multiple resources               to retrieve</a> - and the resource ids of the desired records will not always be known.</li>            <li>The exchange is not about retrieving the <a href="https://build.fhir.org/exchanging.html#history">history</a> of any              particular resource.</li>            <li>The desired data should be returnable with an <a href="https://build.fhir.org/exchanging.html#adhoc">ad-hoc               query</a>.</li>            <li>The data can reasonably be retrieved using <a href="https://build.fhir.org/exchanging.html#rest-search">RESTful               search</a>.</li>            <li>The data should be retrievable in real time, so there is no need for              <a href="https://build.fhir.org/exchanging.html#synchronous">asynchronous</a>.</li>          </ul>        </td>      </tr><!--      <tr>        <td>          <a href="https://build.fhir.org/exchanging-rest.html#read">REST Read</a>        </td>        <td>Used by:          <ul>            <li>Any of the systems when accessing a Task or other resource and there is a referenced resource that cannot be              retrieved with a simple <a href="{{site.data.fhir.path}}search.html#_include">_include</a>.</li>            <li>Any of the systems when checking to see whether a record retrieved from a different system               has been updated since last retrieved (e.g. before beginning an update).</li>          </ul>        </td>        <td>RESTful read is appropriate because:          <ul>            <li>The process is <a href="https://build.fhir.org/exchanging.html#pull">initiated by the data consumer</a>, as it decides              what information it is interested in retrieving and when.</li>            <li>There is expected to be a <a href="https://build.fhir.org/exchanging.html#connect-pull">direct connection</a> between               the data source and consumer.  (This IG does not presently support the use of intermediaries.)</li>            <li>There is not expected to be <a href="https://build.fhir.org/exchanging.html#human">human intervention</a> involved in              the data retrieval process.</li>            <li><a href="https://build.fhir.org/exchanging.html#hooks">CDS hooks cards</a> would not be an appropriate retrieval               mechanism.</li>            <li>The data will <a href="https://build.fhir.org/exchanging.html#pre-exists">already exist</a> at the time it is               retrieved.</li>            <li>The focus of the change is retrieving <a href="https://build.fhir.org/exchanging.html#resources">resources</a>.</li>            <li>Only a <a href="https://build.fhir.org/exchanging.html#onlyone">single resource</a> is being retrieved.</li>            <li>The <a href="https://build.fhir.org/exchanging.html#current">current version</a> of the resource is what is needed.</li>          </ul>        </td>      </tr>-->    </tbody>  </table>  <a name="participants"> </a>  <h4>Participant Representation</h4>  <p>    In FHIR, any person (or animal) who is involved in creating, performing, ordering, or otherwise participating in an action will    be identified as one of three resources:  </p>  <ul>    <li><a href="{{site.data.fhir.path}}patient.html">Patient</a> - which represents a recipient of care, regardless of the type      of care or whether the care is medical in nature</li>      <li><a href="{{site.data.fhir.path}}relatedperson.html">RelatedPerson</a> - which represents someone who acts on the basis of their      personal relationship with the patient (relative, friend, roommate, etc.)</li>    <li><a href="{{site.data.fhir.path}}practitioner.html">Practitioner</a> - which represents someone who is acting in their professional      capacity.</li>  </ul>  <p>    A range of additional participants are also possible, including <a href="{{site.data.fhir.path}}device.html">Devices</a>,    <a href="{{site.data.fhir.path}}organization.html">Organizations</a>, <a href="{{site.data.fhir.path}}careteam.html">Care Teams</a>,    and <a href="{{site.data.fhir.path}}healthcareservice.html">HealthcareServices</a>.  All these potential participants are explored    below.  </p>  <a name="value"> </a>  <h5>Electronic Sharing with Patients</h5>  <img  style="float:right;padding:3px" src="patient.png" alt="Clinician showing information on an electronic tablet to a patient"/>  <p>    The term 'patient' may also be foreign to some of the implementers of this implementation guide.  Personal trainers and gyms may     think of those they work with as "clients", "customers", "guests", or some similar term.  FHIR's use of the word 'patient' and the     <a href="{{site.data.fhir.path}}patient.html">Patient</a> resource in no way excludes use by such systems.      The user interfaces for systems should     continue to use whatever terminology is appropriate in their business, regardless of the names of the underlying FHIR objects.  </p>  <p>    Like the <a href="{{site.data.fhir.ver.sdoh}}">Gravity SDOH IG</a>, this IG requires support for electronic data sharing     with patient systems.  Not all patients will have such systems - or even devices capable of accessing or running such     systems.  Even with access to the systems, not all patients will choose to make use of them.  Care can still be provided    in such cases, and the IG ability to share information between     <a href="workflow.html#caremanager">Care Managers</a> and     <a href="workflow.html#serviceprovider">Service Providers</a> will still be beneficial.  As well, patient    circumstances may change over time, meaning that data that might not have been accessed originally might be accessed    at some point in the future when capability and/or interest change.  </p>  <p>    The requirement to share data with patients has two justifications:  </p>  <ul>    <li>Current U.S. regulations mandate the provision of electronic data to patients in interoperable formats.</li>    <li>Applications with an awareness of goals, referrals, plans, and other data can better support patients as they make      lifestyle changes that will result in increased physical activity.</li>  </ul>  <p>    In addition to patients having access to read data stored on other systems, there is also value in them being able to    share information with other systems and even update data residing in those other systems.  See further discussion    on this in the <a href="#permissions">Permissions</a> section below.  </p>  <a name="patient-data"> </a>  <h5>Patient Data Management</h5>  <p>    This IG allows for direct data capture by patients (or their caregivers) both manually and using their devices.  Quite often, this data    may, at least initially, be stored on patient devices such as phones or tablets.  In some cases, it might also find its way into personal    health record (PHR) type systems.  One of the IG design questions was whether to have patient systems expose their own endpoint to allow    local data to be <a href="https://build.fhir.org/exchanging.html#pull">pulled</a> by <a href="workflow.html#caremanager">Care     Manager</a> or <a href="workflow.html#serviceprovider">Service Provider</a> systems.  </p>  <p>    For now, this IG presumes that patient-facing systems will <b>not</b> expose their own FHIR server endpoint.  All data transfer will be    <a href="https://build.fhir.org/exchanging.html#pull">pushed</a> from the <a href="workflow.html#patient">Patient     Engagement</a> system to whatever other systems require it.  The project made this decision because:  </p>  <ul>    <li>Most patient storage devices do not support exposing FHIR server endpoints.</li>    <li>The market for personal health records that could offer such functionality is immature and not widely used by the patient community.</li>    <li>There are standard mechanisms for patients to discover the endpoints of their care providers and gain secure access to those servers      through apps.  There are no similar standard mechanisms for EHRs to discover and securely access patient-centric endpoints.</li>  </ul>  <blockquote class="stu-note">    <p>      PHRs and other patient-facing applications that have their own storage capabilities are welcome to share how they have overcome barriers      around endpoint discovery and authorization and/or present evidence of more widespread use.  In the future, the project may extend this IG to       support architectures where systems can 'pull' data from patient-facing systems rather than always having it pushed.    </p>  </blockquote>  <a name="relatedperson"> </a>  <h5>Patient Caregivers</h5>  <p>    While giving patients the ability to access, and potentially manipulate, data in other systems is valuable, the reality is that not    all patients will be able to do this on their own behalf.  Minors as well as those with cognitive or other limitations may    be unable to use <a href="workflow.html#patient">Patient Engagement systems</a> on their own.    In such situations, patients may rely on family members, neighbors, or others to interact with the systems on their behalf.    In this IG, such individuals are represented using the <a href="StructureDefinition-pa-relatedperson.html">RelatedPerson</a> profile.      Support for this resource is strongly encouraged but is not mandated as the clientele of some providers may not justify the additional    application complexity of supporting users who are acting "on behalf of" someone else, including the consent, access permissions    and other considerations that go along with supporting access by anyone other than the patient themselves.  (In such cases,    it is possible that patients will resort to account sharing, though this may force them to expose more data than they might    otherwise wish to.)  </p>  <a name="provider"> </a>  <h5>Providers</h5>  <p>    As previously mentioned, <i>Practitioner</i> is used to capture the participation of an individual who is acting in their professional    capacity.  Note that practitioners need not be clinical, or even licensed (though regulations, payers, and other policies may set limits    around the scope of practice of different types of individuals based on training, etc.).  <i>Practitioner</i> encompasses administrative    staff, even taxi drivers or others employed completely outside the scope of healthcare.  So long as the individual is doing what they    do as their "job" (even if in a volunteer/internship position), they are a <i>Practitioner</i>.  </p>  <p>    Referencing <i>Practitioners</i> can be done using one of two profiles -     <a href="{{site.data.fhir.ver.uscore}}StructureDefinition-us-core-practitioner.html">US Core Practitioner</a> and    <a href="{{site.data.fhir.ver.uscore}}StructureDefinition-us-core-practitionerrole.html">US Core PractitionerRole</a>.  The former allows    referring to a provider irrespective of their role or who they're working for.  The latter allows also specifying the organization they    were working on behalf of at the time of the action and/or the functional role they were taking on at the time.  In some cases,    if the specific individual is not known or relevant, it might be only the role and/or organization that are populated and no individual    <i>Practitioner</i> will be referenced by the <i>PractitionerRole</i>.  </p>  <p>    In this IG, where it is appropriate to reference providers, there is usually a choice as to whether to send <i>Practitioner</i> or    <i>PractitionerRole</i>.  However, in some cases, the US Core IG has limited participations to <i>Practitioner</i> only, in which case,    this IG enforces the same restriction.  Where available, implementers should generally send <i>PractitionerRole</i> when organization or     role is known and relevant.      </p>  <p>    In some cases, the source system may only know the name and identifier of the individual and not have a stand-alone Practitioner/PractitionerRole    resource.  In this case, it is sufficient to use a <a href="StructureDefinition-reference-rest-or-logical.html">logical</a> reference specifying    just the identifier and display (name) elements.  </p>    <a name="provider-id"> </a>  <h5>Provider Identity</h5>  <p>    For insurance to cover referred services, some form of credentialing and registration of individual users will also likely be needed.  What     expectations payers will have are not yet firmly established.  However, it is likely that registration with professional bodies such as     <a href="https://usreps.org/">The US Registry of Exercise Professionals</a>.  As well, the individual Practitioners and/or Organizations will need    to register for a <a href="https://www.cms.gov/Regulations-and-Guidance/Administrative-Simplification/NationalProvIdentStand">National Provider     Identifier</a> with CMS.  While practitioners can leverage this IG without having an NPI, they will typically not be able to submit insurance    claims based on HIPAA regulations.  The Physical Activity Alliance will work with CMS to reduce barriers to applying for NPIs for exercise    professionals that are not directly affiliated with healthcare organizations.  </p>  <a name="groups"> </a>  <h5>Provider Groups</h5>  <p>    In FHIR, a collection of providers acting together can be represented in three different ways:  </p>  <ul>    <li><a href="{{site.data.fhir.path}}organization.html">Organization</a> represents a collection of individuals who can act collectively.      This does not need to be a legal entity.  It can be used to represent anything from an international company down to a small department      or team.</li>    <li><a href="{{site.data.fhir.path}}careteam.html">CareTeam</a> represents a collection of individuals where each has a specific      function within the team that needs to be called out.  Essentially, a CareTeam is an organization that breaks out who is responsible      for what.</li>    <li><a href="{{site.data.fhir.path}}healthcareservice.html">HealthcareService</a> is used to represent the delivery offerings of a      specific organization at a specific site, including availability time and possibly other details about accepted coverage, etc.</li>  </ul>  <p>    For the sake of simplicity, this IG has chosen to only support <i>Organization</i> when representing clinics, hospitals, fitness centers,    and other provider groupings.  These will be expressed using the     <a href="{{site.data.fhir.ver.uscore}}/StructureDefinition-us-core-organization.html">US Core Organization</a>    profile.  Future releases of this IG may set expectations for use of some of the other resources, depending on how relevant provider    groupings are managed in registries and what implementers find most useful.  </p>  <img  style="float:left;padding:3px" src="watch.jpg" alt="A wall of cabinates containing computer servers"/>  <a name="devices"> </a>  <h5>Devices</h5>  <p>    Many of the <a href="measures.html#activity">activity-based</a> and <a href="measures.html#time">time-based</a> Observations supported    by this profile are most likely to be captured using devices.  It is simply not practical for patients to manually count steps, determine    average heart rate, or estimate calories burned.  The <a href="{{site.data.fhir.path}}observation.html">Observation</a> resource has an    element that allows capturing information about the device used in performing a measurement.  Future releases may mandate support for    this element.  However, to keep implementation as simple as possible, for now there is no expectation to capture information about the    devices used in data capture.  </p>  <br/>  <a name="storage"> </a>  <h4>Data Storage Location</h4>  <p>    One of the key questions that drives much of the architecture is around where systems will store data.  Specifically, where are Tasks,    CarePlans and Goals, and even Observation data stored?  Do copies of the records exist in each system, or are they maintained in only    one?  If only one, is it the system that originally created them or a different system?  Considerations in making these    decisions include the following:  </p>  <ul>    <li>Is there a need for a consistent view of the data - where each system involved has the same understanding?</li>    <li>Does one system have sole authority to make changes to the record, or at least to control who changes the record?</li>    <li>Will changes to the record typically originate more on one system than another?</li>    <li>Does one system have a need for the most up-to-date information about a record more than others?</li>  </ul>  <p>    In this IG, for all the resources shared, the preference, and sometimes the requirement, is that there be a single authoritative    copy of the information.  For <a href="StructureDefinition-pa-servicerequest.html">referrals</a> and the     <a href="StructureDefinition-pa-task-for-referral-management.html">tasks that manage their execution</a>, this is a firm requirement    for legal and payment reasons.  For <a href="StructureDefinition-pa-goal.html">goals</a>,     <a href="StructureDefinition-pa-careplan.html">care plans</a> and <a href="StructureDefinition-pa-condition-low-pa.html">conditions</a>, it     is a strong expectation to avoid patient confusion and ensure all participants are working in alignment.  For     <a href="StructureDefinition-pa-observation-base.html">observations</a>, having duplication is less problematic.  </p>  <p>    The storage decisions that are 'locked down' by this IG are as follows:  </p>  <ul>    <li>The <a href="StructureDefinition-pa-servicerequest.html">Service Requests</a> that represent a referral authorization will always be      stored on the <a href="workflow.html#caremanager">Care Manager</a> system of the practitioner that created the referral.      Only the organization that created the referral can change it.  Status changes, including marking the referral as 'complete' are      determined by the ordering system - even if the performing system thinks a referral is complete, the requester might disagree.</li>      <li><a href="StructureDefinition-pa-condition-low-pa.html">Conditions</a> will also always be stored on the <i>Care Manager</i> system, as only      clinical systems are typically authorized to create official 'diagnoses'.  As well, other systems cannot update these records.</li>    <li>Based on the <a href="#patient-data">patient data</a> decisions above, information such as observation values might be stored on      <a href="workflow.html#patient">Patient Engagement systems</a>, but this data will not be accessible by other      systems.  This means that <a href="StructureDefinition-pa-observation-base.html">physical activity observations</a> captured by patients       will need to be cloned when being shared with <i>Care Managers</i> or <a href="workflow.html#serviceprovider">Service Providers</a>.</li>  </ul>  <p>    Discussion of storage locations that may vary by implementation environment are discussed <a href="#impstorage">below</a>.  </p>  <a name="questionnaires"> </a>  <h4>Questionnaires</h4>  <p>    The Gravity SDOH IG this guide draws from relies on QuestionnaireResponses as the initial means of capturing assessment answers for a    patient's SDOH needs.  The key answers are then extracted into observations and a draft Condition generated if the answers in the     response indicate that an SDOH issue is likely.  Questionnaires are foundational in the Gravity space because there are many    social determinants and the questions that need to be asked to accurately identify whether there is an SDOH are evolving and may    be different in different populations.  </p>  <p>    This IG has opted not to assert the same dependency on the use of Questionnaires as a data gathering technique for assessment information.    The <a href="measures.html#base">base measures</a> used to assess physical activity only contain four questions, and one of those is    calculated by multiplying two of the other answers.  The guidelines for 'appropriate' activity levels by age are extremely simple.    The measures are also quite stable, as are the guidelines.  As a result, the need for rapid evolution and tight control over data capture    is less.  To minimize the implementer complexity around supporting automated extraction of QuestionnaireResponses into Observations and    Conditions, the decision was made to not require this architectural approach.  Systems are still free to use it if they find it valuable.  </p>  <a name="intermediaries"> </a>  <h4>Handling Intermediaries</h4>  <p>    In the <a href="{{site.data.fhir.ver.sdoh}}">Gravity SDOH IG</a>, support is provided for intermediary systems to operate between the    ordering systems and the service delivery systems.  These are labeled     <a href="{{site.data.fhir.ver.sdoh}}/CapabilityStatement-SDOHCC-CoordinationPlatform.html">coordination platforms</a>.  They take    general or broad referrals and break them down into smaller referrals divvied out to service providers with the necessary expertise to    undertake specific tasks.  They might also handle the process of trying to find the most appropriate service provider to handle a    particular referral, having a deeper knowledge of the available service agencies than the ordering provider might.  </p>  <p>    For now, this IG has not introduced a similar concept.  The reasons for this are:  </p>  <ul>    <li>The complexity of the referrals envisioned in the physical activity space is significantly less than it is for social determinants      of health.</li>    <li>There are not (yet?) well developed agencies in the physical activity space who typically take on a coordination role.</li>    <li>For this initial release of the implementation guide, there is a desire to minimize complexity where possible.</li>  </ul>  <p>    If there is a need for intermediaries in a particular implementation environment, they will typically be able to accomplish their    objectives by implementing both the <a href="workflow.html#caremanager">Care Manager</a> and    <a href="workflow.html#serviceprovider">Service Provider</a> interfaces.  When interacting with a <i>Care Manager</i>, they    will behave as a <i>Service Provider</i> and vice versa.  </p>  <a name="messaging"> </a>  <h4>REST vs. Messaging</h4>  <p>    Some of the other HL7 IGs that have been defined that also provide support for referral submission and management.  These environments    have opted to use <a href="https://build.fhir.org/exchanging-messaging.html">messaging</a> rather than RESTful exchange.  The use of    messaging makes sense in environments where there is no mechanism to support securely searching for additional data when needed.  In    that situation, there is no choice but to define in advance exactly what data might need to be shared and to package it all up and    transmit it at once.  However, in the physical activity case, the primary data holder will be EHRs and, due to U.S. regulations, almost    all such systems provide a FHIR interface to allow searching for data.  REST is a preferred interoperability mechanism over    messaging because it is lighter-weight and requires less customization.  It also allows participants to adapt their    exchanges more easily as requirements evolve.  Therefore, this IG therefore follows the     <a href="{{site.data.fhir.ver.sdoh}}">Gravity SDOH</a> IG approach of leveraging REST for referral management.  </p>  <a name="sub-vs-poll"> </a>  <h4>Subscription vs. Polling</h4>  <p>    As described in the <a href="{{site.data.fhir.ver.sdoh}}/checking_task_status.html">Gravity SDOH IG</a>, there are two common    mechanisms for allowing a remote system to monitor for new and changed resources on another system - polling and subscriptions.    This IG has opted to standardize on only the subscription mechanism.  The email and SMS-polling mechanisms do not require any    software capabilities on the part of the <a href="workflow.html#serviceprovider">Service Provider</a> and are relatively    simple to be implemented by <a href="workflow.html#caremanager">Care Managers</a>.  In more sophisticated environments,    systems can use the Web-hook mechanism.  </p>  <p>    The polling mechanism can place a significant load on <i>Care Managers</i>, and this outweighs the slight savings involved in avoiding    the need to develop subscription capabilities.  </p>  <p>    To keep the subscription process as simple as possible, this IG does not mandate support for electronic creation or maintenance of     subscriptions.  While this <i>can</i> be done, systems are also free to handle set-up of subscriptions manually as part of the registration    process.  </p>  <a name="transactions"> </a>  <h4>Transactions and Batch</h4>  <p>    The FHIR specification allows client systems to submit multiple <a href="{{site.data.fhir.path}}http.html#create">creates</a> or    <a href="{{site.data.fhir.path}}http.html#update">updates</a> using the     <a href="{{site.data.fhir.path}}http.html#transaction">batch or transaction</a> mechanism.  There may be situations where it is    attractive to submit multiple observations, or even a care plan and associated goals with a single call, and implementers are free    to take advantage of these mechanisms where both sides provide support.  However, in the interest of simplicity, this IG does not    currently set any conformance expectations around the use of these capabilities.  </p>  <p>    Note that, for most systems, it will be possible to make multiple calls to the same FHIR server in parallel, which may reduce some of the    drivers for the batch/transaction interactions.  </p>    <a name="categories"> </a>  <h4>Resource Categories</h4>  <p>    Many of the profiles used in this resource mandate or require support for the use of specific <code>category</code> element values.    Some of these expectations are inherited from <a href="{{site.data.fhir.ver.uscore}}">US Core</a> where they help EHRs determine which    internal tables a given instance is associated with when the same FHIR resource might correspond to multiple internal EHR concepts.    This IG adds additional expectations related to the <a href="CodeSystem-pa-temporary-codes.html#pa-temporary-codes-PhysicalActivity">Physical Activity</a>    category code.  The intention behind this additional code is to provide a simple mechanism for <a href="workflow.html#caremanager">Care Managers</a>    (and possibly <a href="workflow.html#serviceprovider">Service Providers</a>) to distinguish resources that are relevant to physical    activity from others.  This would then provide a basis for easily filtering what sorts of records should be disclosed to <i>Service Providers</i>    who are exercise professionals.  Additional records (e.g. ACE inhibitor medications, hypertension or diabetes conditions, height and weight    observations, etc.) that are also relevant and appropriate for exercise professionals could be similarly tagged.  </p>  <blockquote class="note-to-balloters">    <p>      Is this a useful mechanism for managing access control?  Would implementers prefer that we drop this expectation and instead drive      access control by some other mechanism?    </p>  </blockquote>  <a name="implementation"> </a>  <h3>Implementation Design Decisions</h3>  <p>    This section of the IG covers the various architectural considerations that are not nailed down as part of the IG design and    where variability across implementations is expected (or at least allowed for).  Implementations will need to make choices amongst    these options based on the implementation environment, or in some cases, may need to support multiple mechanisms.  </p>  <blockquote class="stu-note">    <p>      As the community becomes more mature and we learn more about what implementers can and cannot be expected to do,      it is likely that at least some of the optionality currently supported here will be reduced.  Feedback is welcome on areas where      optionality is felt to be unnecessary or problematic.    </p>  </blockquote>    <a name="impstorage"> </a>  <h4>Implementation Storage Decisions</h4>  <p>    As noted in the section on storage <a href="#">above</a>, there are a few situations where the location where certain resources are    stored and maintained may vary based on environment.  This section discusses those situations:  </p>    <img  style="float:right;padding:3px" src="servers.png" alt="A wall of cabinates containing computer servers"/>  <a name="storage-referral"> </a>  <h5>Storing Referral Tasks</h5>  <p>    There are two options for where <a href="StructureDefinition-pa-task-for-referral-management.html">tasks seeking referral fulfillment</a>:  </p>  <ol>    <li>Create the Task on the <a href="workflow.html#serviceprovider">Service Provider</a> system.</li>    <li>Create the Task on the <a href="workflow.html#caremanager">Care Manager</a>.</li>  </ol>  <p>    The first option is preferred because the Task will primarily be manipulated by the <i>Service Provider</i>, and they have the most urgent    need to understand the 'current' state of the fulfillment process.  However, not all <i>Service Providers</i> will have a FHIR server endpoint    that can host the relevant Tasks.  For this reason, there are two distinct <a href="{{site.data.fhir.path}}capabilitystatement.html">Capability    Statements</a> defined - one for <a href="CapabilityStatement-pa-service-provider-full.html">'full' service providers</a> which have FHIR     server capability and would be responsible for storing the Task, and one for     <a href="CapabilityStatement-pa-service-provider-light.html">'light' service providers</a> which would be notified of relevant tasks     created on the <i>Care Manager</i> and then would use <a href="{{site.data.fhir.path}}search.html">search</a> to retrieve and     <a href="{{site.data.fhir.path}}http.html#update">update</a> to change status and add outputs as necessary.  </p>  <a name="storage-goals"> </a>  <h5>Storing Goals and Plans</h5>  <p>    Goals and plans might be managed by either <a href="workflow.html#serviceprovider">Service Providers</a> or     <a href="workflow.html#caremanager">Care Managers</a>, but regardless of where they are managed could be updated by any of    the systems.  The choice of which system should store should be driven by who initiates the goals and plans and who will be taking    the lead in maintaining those records.  Depending on the circumstance, it could be either.  Obviously, a <i>Service Provider</i> can only    take responsibility for the records if it has a FHIR endpoint, so this is limited to    <a href="CapabilityStatement-pa-service-provider-full.html">'full' service providers</a>.  </p>  <a name="storage-obs"> </a>  <h5>Storing Observations</h5>  <p>    Unlike referrals, plans, and goals, observations are rarely changed once created, so there are fewer negative consequences    to the same records existing on multiple systems.  As well, as discussed in the general section on <a href="#storage">storage</a> above,    the primary sources of observational data - <a href="workflow.html#patient">Patient Engagement systems</a> -    are not expected to have FHIR endpoints.  They might well capture data locally, but if it is going to be shared, it will need to be pushed    to the <a href="workflow.html#serviceprovider">Service Provider</a> and/or     <a href="workflow.html#caremanager">Care Manager</a> systems.  Which one(s) receive the data, and which observation types    get pushed, depends on what information the systems want to see.  Some might not want to receive data at all and will rely on verbal    conversation with the patient to evaluate progress.  Others might be only interested in the     <a href="StructureDefinition-pa-observation-evs.html">base measures</a> but not want all of the supporting measures.  Some systems will be    interested in everything.  Because of this variability, <i>patient engagement</i> systems should be configurable to allow a patient    to identify which system(s) should receive which information (provided, of course, that the patient is comfortable with sharing any    of it).  </p>  <a name="permissions"> </a>  <h4>Permissions for Changing and Creation</h4>  <p>    Historically, <a href="StructureDefinition-pa-goal.html">goal</a> and <a href="StructureDefinition-pa-careplan.html">care plan</a> information    have resided on the system of whomever created them and were revised solely by the users of that system.  However, interoperable interfaces    now mean that it is possible for other systems (and therefore other users) to be involved in the maintenance of these resources.  For example,    a patient, one of their care-givers, and/or an exercise professional  might update a plan originally created by a physician.  The same "multi-user    participation" approach could occur with artifacts created in a <i>service provider</i> system.  However, supporting multiple authors adds    some complexity and requires some implementation decisions:  </p>  <ul>    <li>What external systems (and users) can make changes?  Are patients and their caregivers allowed to make changes?  Can clinicians make      changes to records held by exercise professionals, or vice versa?</li>    <li>What operations are permitted?  Can external systems create care plans and/or goals, or only update them?  (Typically, records are not      deleted - statuses are changed instead.  Certainly, deletion by external systems would be uncommon.)</li>    <li>What data elements can be changed?  Can the nature of the goal or plan itself be changed, or are changes limited to adding comments      and/or updating status?</li>    <li>Are the rules different based on who created the record?  For example, would a patient or service provider have full edit privileges for      plans or goals they created themselves on a <a href="workflow.html#caremanager">Care Manager</a>, but more restrictions on records       that were created by a practitioner within the <i>Care Manager</i> organization.</li>  </ul>  <p>    These decisions will be driven by organizational policy as well as provider comfort levels.  However, suggested elements to support updating    include at least the following: <code>CarePlan.status</code>, <code>CarePlan.period</code>, <code>CarePlan.note</code>,     <code>Goal.lifecycleStatus</code>, <code>Goal.achievementStatus</code>, <code>Goal.note</code>.  </p>  <p>    Certain elements will typically never be allowed to be change - even if being updated by the same system that originally created the record -     e.g. the patient, the creating provider, etc.  In situations where the data elements cannot be updated, if the data is incorrect the solution    is to update the original record's status to "entered-in-error" and then create a new record with the updated information.  </p>  <a name="task"> </a>  <h4>Task as a Means of Communication</h4>  <p>    <a href="StructureDefinition-pa-task-for-referral-management.html">Tasks for referral management</a> are the mechanism that     <a href="workflow.html#caremanager">Care Managers</a> use to communicate with    <a href="workflow.html#serviceprovider">Service Providers</a>.  At a minimum, there is a need to communicate    the following:  </p>  <ul>    <li>A practitioner is asking an exercise professional/organization to fulfill a referral.  (<code>Task.status</code>='requested')</li>    <li>The exercise professional/organization has accepted or rejected that request for fulfillment.  (<code>Task.status</code>='accepted'/'rejected')</li>    <li>The exercise professional/organization considers their work to be completed.  (<code>Task.status</code>='completed')</li>  </ul>  <p>    However, there is additional information that can be shared.  Systems can use <code>Task.status</code> to communicate additional information as shown in the     <a href="StructureDefinition-pa-task-for-referral-management.html#status">notes section</a> of the profile.  As well, they can use <code>Task.statusReason</code>     and <code>Task.note</code> to convey additional information.  <code>Task.statusReason</code>    is set by whichever system sets the status (<i>Care Manager</i> for 'cancelled' and <i>Service Provider</i> for 'rejected', 'on-hold', or 'failed').      <code>Task.note</code> might be populated by either system.    Finally, there is the <a href="StructureDefinition-pa-diagnosticreport.html">intervention report</a> linked to by <code>Task.output</code> which is    created by the <i>Service Provider</i>.  Typically, this is done at the completion of the referral, but in some cases the draft version of the report    might be shared early, or even multiple reports created over time.  </p>  <blockquote class="stu-note">    <p>      There is an additional element defined on Task - <code>Task.businessStatus</code> - that can also be used to convey information about the progress      of a Task.  In this release, this element has not been marked as mustSupport, though its use is not prohibited.  It would generally only be set by      the <i>Service Provider.</i>    </p>    <p>      If implementers have found a need for <code>Task.businessStatus</code> and/or <code>Task.note</code>, please communicate that to the design team using the "propose a change"      link or on the <a href="https://chat.fhir.org/#narrow/stream/327137-Physical-Activity">project chat.fhir.org stream</a>.  Future release of       this implementation guide may set expectations around the use of these elements if there are clear implementation requirements.    </p>  </blockquote>  <p>    The design decision here is around how much communication is necessary or appropriate.  Some <i>Care Managers</i> may have little interest beyond    acceptance and completion, while others may find value in progress updates for each visit.  <i>Service Providers</i> may not have a workflow design,    bandwidth, and/or funding to provide any information beyond the minimum, or they might be well-positioned to document and share progress on a    regular basis.  This IG does not set specific expectations for how much information should be communicated or in what circumstances.  For now,    such decisions are up to the participants in the exchange and may be negotiated accordingly.  </p>  <img style="float:left;padding:3px" src="park-stretch.png" width="360" alt="Young obese female with ethnic male instructor exercising together in park"/>  <a name="registries"> </a>  <h4>Registries</h4>  <p>    Communication between <a href="workflow.html#caremanager">Care Managers</a> and     <a href="workflow.html#patient">Patient Engagement</a> systems is somewhat straight-forward because, based on US regulation,    EHRs already need to have a mechanism of registering and authenticating patients and enabling them to communicate with their systems, typically using    OAuth as defined by <a href="{{site.data.fhir.ver.smart}}">SMART on FHIR</a> patient-mediated authentication.  However, establishing a connection     between <i>care managers</i> and <a href="workflow.html#serviceprovider">Service Providers</a> is somewhat more challenging as there    will often not be a direct personal relationship between <i>care manager</i> and <i>service provider</i>.  </p>  <p>    Establishing interoperability will mean exchanging endpoint locations, establishing trust (having each system's authorization engine grant appropriate    privileges to relevant users of the other system), and putting in place necessary legal frameworks, such as affiliate agreements to allow sharing    of data and ensuring that data shared is subject to appropriate protections.    </p>  <p>    In the short term, relationships between <i>Care Managers</i> and <i>Service Providers</i> will need to be manually negotiated and established.      Implementers will need to work to create business and legal arrangements with other interested parties who have undertaken the work to comply with    this standard and are able to create or receive referrals.  In the intermediate term, organizations may be able to take advantage of the anticipated    national provider registry leveraging the <a href="https://hl7.org/fhir/us/directory-query">FAST Directory Query IG</a> standard to    discover eligible Practitioners and Organizations and leverage the shared legal framework to establish connection automatically without a need for    point-to-point negotiation.  </p>    <a name="identity"> </a>  <h4>Resolving Identity</h4>  <p>    Unlike CareTeams, Practitioners, PractitionerRoles, Organizations and HealthcareServices as discussed above, there typically will not be a shared     registry of <a href="{{site.data.fhir.path}}patient.html">Patients</a> or <a href="{{site.data.fhir.path}}relatedperson.html">Related Persons</a>     available to reference.  There is also not (yet?) a single shared patient identifier that systems can use to reliably convey the identity of these     individuals.  However, there will be a need for <a href="workflow.html#caremanager">Care Managers</a>,     <a href="workflow.html#serviceprovider">Service Providers</a> and <a href="workflow.html#patient">Patient     Engagement</a> systems to recognize patient and related person records referenced in other systems with the equivalent records in their own system    to ensure that duplicate records are not accidentally created.  </p>  <p>    Given the absence of a reliable cross-system identifier, matching will need to be performed based on demographics.  This IG does not set    expectations for how systems perform matching, beyond setting standards for what demographic information must be shared.  There are a wide variety of    approaches that account for variations in spelling, transposition of portions of birth date, changes in identifying information such as gender,    etc.  Each implementation will need to determine a set of criteria that sufficiently reduces both the risk of an incorrect match, as well as the    failure to match appropriately - and thus risk the creation of a duplicate record.  </p>  <a name="additional"> </a>  <h4>Additional exchange</h4>  <p>    This IG defines specific profiles on information directly related to physical activity that are not well defined in other IGs.  However, it    is likely that the stakeholders involved in helping a patient improve their physical activity will find information useful above and beyond    what is in this guide.  Information on past injuries, physical or cognitive limitations, certain medications, certain concomitant health    conditions, etc. can all influence decisions around appropriate and safe therapy.  Therefore, implementers of this IG might well support     searching for resources that do not fall within the profiles defined here.  The choice of what additional data is appropriate (and authorized)    will need to be negotiated based on circumstance as well as based on patient consent.  See the <a href="security.html#access">Security and    Privacy page</a> for more discussion.  </p></div>